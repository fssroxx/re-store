{"version":3,"sources":["components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","actions/index.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/book-list/book-list.js","components/book-list/index.js","utils/compose.js","components/shopping-card-table/shopping-card-table.js","components/shopping-card-table/index.js","components/pages/home-page.js","components/pages/cart-page.js","components/shop-header/index.js","components/shop-header/shop-header.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","services/bookstore-service.js","reducers/index.js","store.js","index.js"],"names":["BookListItem","book","onAddedToCart","title","author","price","coverImage","className","src","alt","href","onClick","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","fetchBooks","dispatch","type","getBooks","then","data","payload","catch","err","bookAddedToCart","bookId","Spinner","ErrorIndicator","BookList","books","map","id","BookListContainer","this","loading","error","Component","funcs","comp","reduceRight","wrapped","f","compose","connect","ownProps","mapDispatchToProps","onIncrease","onDelete","onDecrease","ShoppingCardTable","items","cartItems","total","orderTotal","item","idx","count","HomePage","CartPage","ShopHeader","numItems","App","role","path","component","exact","ErrorBoundry","state","hasError","setState","children","BookstoreService","Promise","resolve","reject","setTimeout","Math","random","Error","initialState","updateOrder","quantity","find","itemIndex","findIndex","newItem","updateCartItem","updateCartItems","slice","reducer","action","console","log","store","createStore","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.4eafe490.chunk.js","sourcesContent":["import BookListItem from './book-list-item';\r\nexport default BookListItem;","import './book-list-item.css';\r\n\r\nconst BookListItem = ({ book, onAddedToCart }) => {\r\n    const { title, author, price, coverImage } = book;\r\n    return(\r\n        <div className=\"book-list-item\">\r\n            <div className=\"book-cover\">\r\n                <img className=\"cover\" src={ coverImage } alt=\"cover\"/>\r\n            </div>\r\n            <div className=\"book-details\">\r\n                <a href=\"/\" className=\"book-title\">{title}</a>\r\n                <div className=\"book-author\">\r\n                    { author }\r\n                </div>\r\n                <div className=\"book-price\">\r\n                    $ { price }\r\n                </div>\r\n                <button\r\n                onClick={onAddedToCart}\r\n                className=\"btn btn-info add-to-cart\">\r\n                    Add to cart\r\n                </button>\r\n            </div>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BookListItem;","import React from 'react';\r\n\r\nconst {\r\n    Provider: BookstoreServiceProvider,\r\n    Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport{\r\n    BookstoreServiceConsumer, \r\n    BookstoreServiceProvider\r\n}","import React from 'react';\r\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n    return (props) => {\r\n        return (\r\n            <BookstoreServiceConsumer>\r\n                {\r\n                    (bookstoreService) => {\r\n                       return( <Wrapped {...props} \r\n                        bookstoreService={bookstoreService} /> ) \r\n                    }\r\n                }\r\n            </BookstoreServiceConsumer>\r\n\r\n        )\r\n    }\r\n}\r\nexport default withBookstoreService;","\r\nconst booksLoaded = (newBooks) => {\r\nreturn {\r\n    type: 'FETCH_BOOKS_SUCCESS',\r\n    payload: newBooks\r\n}\r\n}\r\n\r\nconst booksRequested = () => {\r\n    return {\r\n        type: \"FETCH_BOOKS_REQUEST\"\r\n    }\r\n}\r\n\r\nconst booksError = (error) => {\r\n    return{\r\n        type: \"FETCH_BOOKS_FAILURE\",\r\n        payload: error\r\n    }\r\n}\r\n\r\nconst fetchBooks = (bookstoreService, dispatch) => () => {\r\n    dispatch(booksRequested());\r\n    bookstoreService.getBooks()\r\n    .then((data) => dispatch(booksLoaded(data)))\r\n    .catch((err) => dispatch(booksError(err)))\r\n   }\r\n\r\nexport const bookAddedToCart = (bookId) => {\r\n    return {\r\n        type: 'BOOK_ADDED_TO_CART',\r\n        payload: bookId\r\n    }\r\n}\r\nexport const bookRemovedFromCart = (bookId) => {\r\n    return {\r\n        type: 'BOOK_REMOVED_FROM_CART',\r\n        payload: bookId\r\n    }\r\n}\r\nexport const allBooksRemovedFromCart = (bookId) => {\r\n    return {\r\n        type: 'ALL_BOOKS_REMOVED_FROM_CART',\r\n        payload: bookId\r\n    }\r\n}\r\nexport {\r\n    fetchBooks\r\n};","import Spinner from './spinner';\r\nexport default Spinner;","const Spinner = () => {\r\n    return <div>loading....</div>\r\n};\r\nexport default Spinner;","import ErrorIndicator from './error-indicator';\r\nexport default ErrorIndicator;","const ErrorIndicator = () => {\r\n    return(\r\n        <div>Error!</div>\r\n        )\r\n}\r\n   \r\nexport default ErrorIndicator;","import BookListItem from \"../book-list-item\"\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { compose } from '../../utils';\r\nimport { withBookstoreService } from '../hoc';\r\nimport { fetchBooks, bookAddedToCart } from '../../actions';\r\nimport Spinner from '../spinner';\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nimport './book-list.css';\r\n\r\nconst BookList = ({ books, onAddedToCart}) => {\r\n    return(\r\n        <ul className=\"book-list\">\r\n            {\r\n            books.map((book) => {\r\n                return <li key={ book.id }><BookListItem book={book} onAddedToCart={() => onAddedToCart(book.id)}/> </li>\r\n                })\r\n            }\r\n            \r\n        </ul>\r\n    )\r\n}\r\n\r\nclass BookListContainer extends Component {\r\n    componentDidMount(){\r\n        \r\n        this.props.fetchBooks();\r\n        \r\n    }\r\n\r\n    render () {\r\n        const { books, loading, error, onAddedToCart } = this.props;\r\n        if (loading) {\r\n            return <Spinner/>\r\n        }\r\n        if(error){\r\n            return <ErrorIndicator/>\r\n        }\r\n       \r\n        return <BookList books={books} onAddedToCart={onAddedToCart}/>\r\n    }\r\n  \r\n}\r\nconst mapStateToProps = ({ books,  loading, error}) => {\r\n    return { books, loading, error }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n    const { bookstoreService } = ownProps;\r\n       return {\r\n           fetchBooks: fetchBooks(bookstoreService, dispatch),\r\n           onAddedToCart: (id) => dispatch(bookAddedToCart(id))\r\n       }\r\n}\r\n\r\n\r\nexport default compose(withBookstoreService()\r\n(connect(mapStateToProps, mapDispatchToProps)\r\n(BookListContainer)));","import BookList from './book-list';\r\nexport default BookList;","const compose = (...funcs) => \r\n    (comp) => {\r\n        return funcs.reduceRight(\r\n            (wrapped, f) => f(wrapped), comp);\r\n        \r\n    }\r\n\r\n\r\nexport{\r\n    compose\r\n};","import './shopping-card-table.css';\r\nimport { connect } from 'react-redux';\r\nimport { bookAddedToCart, bookRemovedFromCart, allBooksRemovedFromCart} from '../../actions';\r\n\r\nconst mapStateToProps = ({ cartItems, orderTotal }) => {\r\n    return {\r\n        items: cartItems,\r\n        total: orderTotal\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n        onIncrease: bookAddedToCart,\r\n        onDelete: allBooksRemovedFromCart,\r\n        onDecrease: bookRemovedFromCart\r\n}\r\n\r\nconst ShoppingCardTable = ({ items, total, onIncrease, onDecrease, onDelete}) => {\r\n    const renderRow = (item,idx) => {\r\n        const { id, title, count, total } = item;\r\n        return(\r\n            <tr key={ id }>\r\n                <td>{ idx + 1 }</td>\r\n                <td>{ title }</td>\r\n                <td>{ count }</td>\r\n                <td>{ total }</td>\r\n                <td>\r\n                    <button \r\n                    onClick={() => onDecrease(id)}\r\n                    className=\"btn btn-outline-danger btn-sm float-right\">\r\n                        <i className=\"fa fa-minus-circle\" />\r\n                    </button>\r\n                    <button \r\n                    onClick={() => onIncrease(id)}\r\n                    className=\"btn btn-outline-success btn-sm float-right\">\r\n                        <i className=\"fa fa-plus-circle\" />\r\n                    </button>\r\n                    <button \r\n                    onClick={() => onDelete(id)}\r\n                    className=\"btn btn-outline-warning btn-sm float-right \">\r\n                        <i className=\"fa fa-trash-o\" />\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n        )\r\n    }\r\n\r\n    return(\r\n        <div className=\"shopping-cart-table\">\r\n            <h2>Your Order</h2>\r\n            <table className=\"table\">\r\n                <thead>\r\n                   <tr>\r\n                        <th>#</th>\r\n                        <th>Item</th>\r\n                        <th>Count</th>\r\n                        <th>Price</th>\r\n                        <th>Action</th>\r\n                   </tr>\r\n                </thead>\r\n\r\n                <tbody>\r\n                    {\r\n                        \r\n                        items.map(renderRow)\r\n                    }\r\n                </tbody>\r\n            </table>\r\n            <div className=\"total\">\r\n                Total: {total}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCardTable);","import ShoppingCardTable from './shopping-card-table';\r\nexport default ShoppingCardTable;","import BookList from \"../book-list\";\r\nimport ShoppingCardTable from \"../shopping-card-table\";\r\n\r\n\r\nconst HomePage = () => {\r\n    return (\r\n        <div>\r\n            <BookList />\r\n            <ShoppingCardTable />\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default HomePage;","\r\n\r\nconst CartPage = () => {\r\n    return <div> Home Page </div>\r\n}\r\nexport default CartPage;","import ShopHeader from './shop-header';\r\nexport default ShopHeader;","import './shop-header.css';\r\n\r\nconst ShopHeader = ({ numItems, total }) => {\r\n    \r\n    return(\r\n        <header className=\"shop-header row\">\r\n            <a className=\"logo text-dark\" href=\"/\">\r\n                ReStore\r\n            </a>\r\n            <a className=\"shopping-cart\"> \r\n                <i className=\"cart-icon fa fa-shopping-cart\"/>\r\n                { numItems} items $ ({ total }) \r\n            </a>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default ShopHeader;","import App from './app';\r\nexport default App;","import { Route, Switch } from 'react-router-dom';\r\nimport { HomePage, CartPage } from '../pages'\r\nimport ShopHeader from '../shop-header';\r\n\r\nconst App = () => {\r\n    \r\n    return(\r\n       <main role=\"main\" className=\"container\">\r\n           <ShopHeader numItems={5} total={200} />\r\n            <Switch>\r\n                <Route \r\n                    path=\"/\"\r\n                    component={HomePage} exact/>\r\n                <Route \r\n                    path=\"/cart\"\r\n                    component={CartPage}/>\r\n            </Switch>\r\n        </main>\r\n\r\n    )\r\n}\r\nexport default App;","import { render } from \"@testing-library/react\"\r\n\r\nimport React, { Component } from 'react';\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nexport default class ErrorBoundry extends Component{\r\n\r\n    state = {\r\n        hasError: false\r\n    }\r\n    \r\n    componentDidCatch() {\r\n        this.setState({\r\n            hasError: true\r\n        })\r\n    }\r\n    render() {\r\n        if (this.state.hasError){\r\n            return <ErrorIndicator/>\r\n        }\r\n        \r\n        return this.props.children\r\n    }\r\n}\r\n\r\n","export default class BookstoreService{\r\n    data = [\r\n        { id: 1, title: 'SMTH interesting', author: 'fssroxx', price: 20, coverImage: \"https://cv8.litres.ru/pub/c/elektronnaya-kniga/cover_415/51598283-stiven-king-institut.jpg\" },\r\n        { id: 2, title: 'SMTH interesting else', author: 'fssroxx', price: 50, coverImage: 'https://cv0.litres.ru/pub/c/elektronnaya-kniga/cover_415/6538809-robert-gelbreyt-zov-kukushki.jpg' }\r\n    ];\r\n\r\n    getBooks() {\r\n        return new Promise((resolve, reject) => {\r\n            setTimeout(() => {\r\n                if(Math.random > 0.75){\r\n                    reject(new Error('smth bad happened'))\r\n                } else{\r\n                    resolve(this.data)\r\n                }\r\n                \r\n               \r\n            }, 700)\r\n        })\r\n    }\r\n}","\r\nconst initialState = {\r\n    books: [],\r\n    loading: true,\r\n    error: null,\r\n    cartItems:[\r\n        \r\n    ],\r\n    orderTotal: 390\r\n}\r\nconst updateOrder = (state, bookId, quantity) => {\r\n    const { books, cartItems } = state;\r\n    const book = books.find((book) => book.id === bookId);\r\n    const itemIndex = cartItems.findIndex(({id}) => id === bookId);\r\n    const item = cartItems[itemIndex];\r\n    \r\n    const newItem = updateCartItem(book, item, quantity);\r\n    \r\n        return {\r\n            ...state,\r\n            cartItems:updateCartItems(state.cartItems, newItem, itemIndex )\r\n        }\r\n}\r\nconst updateCartItems = (cartItems, item, idx) => {\r\n    if (item.count === 0){\r\n        return [\r\n            ...cartItems.slice(0, idx),\r\n            ...cartItems.slice(idx + 1)\r\n        ]\r\n    }\r\n\r\n    if (idx===-1) {\r\n        return[\r\n            ...cartItems,\r\n            item\r\n        ];\r\n    }\r\n\r\n    return [\r\n        ...cartItems.slice(0, idx),\r\n        item,\r\n        ...cartItems.slice(idx + 1),\r\n    ]\r\n}\r\nconst updateCartItem = (book, item = {}, quantity) => {\r\n    const {\r\n         id = book.id, \r\n         count = 0, \r\n         title = book.title, \r\n         total = 0 } = item;\r\n\r\n    return {\r\n        id,\r\n        title,\r\n        count: count + quantity,\r\n        total: total + quantity * book.price\r\n    }\r\n}\r\nconst reducer = (state = initialState, action) => {\r\n    console.log(action.type);\r\n    switch(action.type){\r\n        case 'FETCH_BOOKS_REQUEST': {\r\n            return {\r\n                ...state,\r\n                books: [],\r\n                loading: true,\r\n                error: null\r\n            }\r\n        }\r\n        case \"FETCH_BOOKS_SUCCESS\":\r\n            return {\r\n                ...state,\r\n                books: action.payload,\r\n                loading:false,\r\n                error: null\r\n            }\r\n        case 'FETCH_BOOKS_FAILURE': {\r\n            return {\r\n                ...state,\r\n                books: [],\r\n                loading: false,\r\n                error: action.payload\r\n            }\r\n       \r\n        }\r\n        case 'BOOK_ADDED_TO_CART':\r\n            return updateOrder(state, action.payload, 1);\r\n        case 'BOOK_REMOVED_FROM_CART': \r\n            return updateOrder(state, action.payload, -1);\r\n        case 'ALL_BOOKS_REMOVED_FROM_CART': \r\n            const item = state.cartItems.find(({id}) => id === action.payload)\r\n            return updateOrder(state, action.payload, -item.count)\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","import { createStore } from 'redux';\r\n\r\nimport reducer from './reducers';\r\n\r\n\r\nconst store = createStore(reducer);\r\n\r\nexport default store; ","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\n\r\nimport App from './components/app';\r\nimport ErrorBoundry from './components/error-boundry';\r\nimport BookstoreService from './services/bookstore-service';\r\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\r\n\r\nimport store from './store';\r\n\r\nconst bookstoreService = new BookstoreService();\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <ErrorBoundry>\r\n            <BookstoreServiceProvider \r\n                value={bookstoreService} >\r\n                <Router>\r\n                    <App/>\r\n                </Router>\r\n            </BookstoreServiceProvider>\r\n        </ErrorBoundry>\r\n    </Provider>, \r\n    document.getElementById('root')\r\n)"],"sourceRoot":""}